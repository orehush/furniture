(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{53:function(e,t){},65:function(e,t,n){},66:function(e,t,n){},85:function(e,t,n){},91:function(e,t){},92:function(e,t){},94:function(e,t,n){"use strict";n.r(t);var c=n(0),r=n.n(c),a=n(26),i=n.n(a),s=(n(65),n(22)),o=n(6),j=n(8),u=(n(66),n(102)),l=n(55),d=n(11),b=n.n(d),h=n(60),O=n(17),f=n(39),x=function(e,t){return Object(f.isEmpty)(e)?t:e},p=function(){var e=Object(O.a)(b.a.mark((function e(t,n,c,r,a){var i,s;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Object.entries(x(c,{})).map((function(e){var t=Object(j.a)(e,2),n=t[0],c=t[1];return"".concat(n,"=").concat(c)})).join("&"),e.next=3,fetch("/api".concat(n,"?").concat(i),{method:t.toUpperCase(),mode:"cors",cache:"no-cache",headers:Object(h.a)({"Content-Type":"application/json"},x(a,{})),body:Object(f.isEmpty)(r)?null:JSON.stringify(r)});case 3:return s=e.sent,e.next=6,s.json();case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e)})));return function(t,n,c,r,a){return e.apply(this,arguments)}}(),m=function(e){return p("GET","/projects/".concat(e))},v=function(e){var t=e.city,n=e.street,c=e.name;return p("POST","/projects",null,{city:t,street:n,name:c})},g=function(e,t,n){return p("POST","/nightstands",null,{template:e,project:t,inputs:n})},y=n(54),w=n.n(y),C=n(2);function k(e){var t=e.show,n=e.onClose,r=e.children,a=Object(c.useState)(t),i=Object(j.a)(a,2),s=i[0],o=i[1];return Object(c.useEffect)((function(){o(t)}),[t]),Object(C.jsx)(w.a,{isOpen:s,toggle:function(){return o(!s)},onClosed:n,children:r})}var S=n(96),N=n(97),E=n(98),_=n(99),T=n(100);function F(e){var t=e.onFinish,n=Object(c.useState)(""),r=Object(j.a)(n,2),a=r[0],i=r[1],s=Object(c.useState)(""),o=Object(j.a)(s,2),u=o[0],l=o[1],d=Object(c.useState)(""),h=Object(j.a)(d,2),f=h[0],x=h[1];return Object(C.jsxs)(S.a,{className:"m-5",children:[Object(C.jsx)("h3",{children:"Create New Project"}),Object(C.jsxs)(N.a,{children:[Object(C.jsx)(E.a,{for:"name",children:"Name"}),Object(C.jsx)(_.a,{type:"text",name:"name",id:"name",placeholder:"project name",value:a,onChange:function(e){return i(e.target.value)}})]}),Object(C.jsxs)(N.a,{children:[Object(C.jsx)(E.a,{for:"city",children:"City"}),Object(C.jsx)(_.a,{type:"text",name:"city",id:"city",placeholder:"city",value:u,onChange:function(e){return l(e.target.value)}})]}),Object(C.jsxs)(N.a,{children:[Object(C.jsx)(E.a,{for:"street",children:"Street"}),Object(C.jsx)(_.a,{type:"text",name:"street",id:"street",placeholder:"street",value:f,onChange:function(e){return x(e.target.value)}})]}),Object(C.jsx)(T.a,{onClick:Object(O.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v({name:a,city:u,street:f});case 2:t&&t();case 3:case"end":return e.stop()}}),e)}))),disabled:!a||!u,children:"Submit"})]})}function P(){var e=Object(u.a)("project-list",(function(){return function(){return p("GET","/projects",{page:arguments.length>0&&void 0!==arguments[0]?arguments[0]:1})}()})),t=e.data,n=e.isLoading,r=Object(l.b)(),a=Object(c.useState)(!1),i=Object(j.a)(a,2),o=i[0],d=i[1];return Object(C.jsxs)("div",{className:"m-5",children:[Object(C.jsx)("h1",{children:"Projects list"}),n&&Object(C.jsx)("div",{children:"Loading..."}),Object(C.jsx)("ul",{children:t&&t.results.map((function(e){return Object(C.jsx)("li",{children:Object(C.jsx)(s.b,{to:"/project/".concat(e.id),children:e.name})},e.id)}))}),Object(C.jsx)(T.a,{onClick:function(){d(!0)},children:"Add new project"}),Object(C.jsx)(k,{show:o,onClose:function(){return d(!1)},children:Object(C.jsx)(F,{onFinish:function(){r.invalidateQueries("project-list"),d(!1)}})})]})}n(85);var L=function(){var e=Object(O.a)(b.a.mark((function e(t){var n,c;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m(t);case 2:return n=e.sent,e.next=5,p("GET","/projects/".concat(t,"/nightstands"));case 5:return c=e.sent,e.abrupt("return",{project:n,boxes:c});case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),q=function(e){if(!e)return[];var t=[["\u0422\u0438\u043f \u043c\u0430\u0442\u0435\u0440\u0456\u0430\u043b\u0443","\u0428\u0438\u0440\u0438\u043d\u0430","\u0414\u043e\u0432\u0436\u0438\u043d\u0430","\u041a\u0456\u043b\u044c\u043a\u0456\u0441\u0442\u044c","\u041f\u043b\u043e\u0449\u0430","\u041f\u043b\u043e\u0449\u0430 \u0437 \u0437\u0430\u043f\u0430\u0441\u043e\u043c","\u041a\u0440\u043e\u043c\u043a\u0430","\u041a\u0440\u043e\u043c\u043a\u0430 \u0437 \u0437\u0430\u043f\u0430\u0441\u043e\u043c","\u041a\u0456\u043b\u044c\u043a\u0456\u0441\u0442\u044c \u0441\u0432\u0435\u0440\u043b\u0456\u043d\u044c"]];return e.forEach((function(e){e.outputs.forEach((function(e){t.push([e.base,e.width||0,e.length||0,e.amount||0,e.square||0,e.square_extra||0,e.edge||0,e.edge_extra||0,e.drilling_count||0])}))})),t},B=n(28),D=n.n(B),G=n(58),A=n(41),J=function(e){var t=e.csvData,n=e.fileName;return Object(C.jsx)(D.a,{color:"info",onClick:function(e){return function(e,t){var n={Sheets:{data:A.utils.json_to_sheet(e)},SheetNames:["data"]},c=A.write(n,{bookType:"xlsx",type:"array"}),r=new Blob([c],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;charset=UTF-8"});G.saveAs(r,t+".xlsx")}(t,n)},children:"Export to excel"})},I=n(59),M=function(e){var t=e.template,n=e.onChange,r=Object(c.useState)(null===t||void 0===t?void 0:t.default_value),a=Object(j.a)(r,2),i=a[0],s=a[1];return Object(c.useEffect)((function(){t.default_value&&s(t.default_value)}),[t]),Object(c.useEffect)((function(){n(+i)}),[i]),4===t.type?Object(C.jsxs)(N.a,{tag:"fieldset",children:[Object(C.jsx)("legend",{children:t.name}),Object(C.jsx)(N.a,{check:!0,children:Object(C.jsxs)(E.a,{check:!0,children:[Object(C.jsx)(_.a,{type:"radio",name:"radio1",value:1,onChange:function(e){return s(e.target.value)}})," ","Yes"]})}),Object(C.jsx)(N.a,{check:!0,children:Object(C.jsxs)(E.a,{check:!0,children:[Object(C.jsx)(_.a,{type:"radio",name:"radio1",value:0,onChange:function(e){return s(e.target.value)}})," ","No"]})})]}):Object(C.jsxs)(N.a,{children:[Object(C.jsx)(E.a,{for:"name",children:t.name}),Object(C.jsx)(_.a,{type:"number",name:"name",placeholder:t.name,value:i,onChange:function(e){return s(e.target.value)}})]})};function Q(e){var t=e.onFinish,n=e.project,r=Object(c.useState)([]),a=Object(j.a)(r,2),i=a[0],s=a[1],o=Object(c.useState)(null),l=Object(j.a)(o,2),d=l[0],h=l[1],f=Object(u.a)("templates",(function(){return p("GET","/nightstand_templates")})).data;return Object(c.useEffect)((function(){d&&d.inputs&&s(d.inputs.filter((function(e){return e.default_value})).map((function(e){return{template:e.id,value:e.default_value}})))}),[d]),Object(C.jsxs)(S.a,{className:"m-5",children:[Object(C.jsx)("h3",{children:"Create New Box"}),f&&f.map((function(e){return Object(C.jsx)("div",{style:{width:"150px",height:"150px",border:"1px solid #000",cursor:"pointer"},className:"p-2 d-flex justify-content-center align-items-center ".concat(e.id===(null===d||void 0===d?void 0:d.id)&&"border-info border-2"),onClick:function(){return h(e)},children:Object(C.jsx)("h4",{children:e.name})},e.id)})),d&&d.inputs&&d.inputs.map((function(e){return Object(C.jsx)(M,{template:e,onChange:function(t){s([].concat(Object(I.a)(i.filter((function(t){return t.template!==e.id}))),[{template:e.id,value:t}]))}})})),Object(C.jsx)(T.a,{onClick:Object(O.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g(d.id,n.id,i);case 2:t&&t();case 3:case"end":return e.stop()}}),e)}))),disabled:!d,children:"Submit"})]})}function U(){var e=Object(o.g)().id,t=Object(o.f)(),n=Object(l.b)(),r=Object(c.useState)(!1),a=Object(j.a)(r,2),i=a[0],s=a[1],d=Object(u.a)("project-detail-".concat(e),(function(){return L(e)}),{initialData:{}}),b=d.data,h=b.project,O=b.boxes,f=d.isLoading;return Object(C.jsxs)("div",{className:"m-5",children:[Object(C.jsx)("h1",{children:"Project Details"}),Object(C.jsx)(D.a,{onClick:function(){return t.push("/")},children:"Go Back"}),f&&Object(C.jsx)("div",{children:"Loading..."}),Object(C.jsx)("div",{children:null===h||void 0===h?void 0:h.name}),Object(C.jsx)("div",{children:null===h||void 0===h?void 0:h.city}),Object(C.jsx)("div",{children:null===h||void 0===h?void 0:h.address}),Object(C.jsxs)("div",{className:"mt-3",children:[Object(C.jsxs)("div",{className:"mb-2 w-50 d-flex justify-content-between",children:[h&&O&&Object(C.jsx)(J,{csvData:q(O),fileName:h.name}),h&&Object(C.jsx)(D.a,{color:"primary",onClick:function(){return s(!0)},children:"Add new box"})]}),Object(C.jsxs)("table",{className:"table table-bordered table-striped w-50",children:[Object(C.jsx)("thead",{children:Object(C.jsxs)("tr",{children:[Object(C.jsx)("th",{children:"\u0422\u0438\u043f \u043c\u0430\u0442\u0435\u0440\u0456\u0430\u043b\u0443"}),Object(C.jsx)("th",{children:"\u0428\u0438\u0440\u0438\u043d\u0430"}),Object(C.jsx)("th",{children:"\u0414\u043e\u0432\u0436\u0438\u043d\u0430"}),Object(C.jsx)("th",{children:"\u041a\u0456\u043b\u044c\u043a\u0456\u0441\u0442\u044c"}),Object(C.jsx)("th",{children:"\u041f\u043b\u043e\u0449\u0430"}),Object(C.jsx)("th",{children:"\u041f\u043b\u043e\u0449\u0430 \u0437 \u0437\u0430\u043f\u0430\u0441\u043e\u043c"}),Object(C.jsx)("th",{children:"\u041a\u0440\u043e\u043c\u043a\u0430"}),Object(C.jsx)("th",{children:"\u041a\u0440\u043e\u043c\u043a\u0430 \u0437 \u0437\u0430\u043f\u0430\u0441\u043e\u043c"}),Object(C.jsx)("th",{children:"\u041a\u0456\u043b\u044c\u043a\u0456\u0441\u0442\u044c \u0441\u0432\u0435\u0440\u043b\u0456\u043d\u044c"})]})}),Object(C.jsx)("tbody",{children:O&&O.map((function(e){return e.outputs.map((function(e){return Object(C.jsxs)("tr",{children:[Object(C.jsx)("td",{children:e.base}),Object(C.jsx)("td",{children:e.width||0}),Object(C.jsx)("td",{children:e.length||0}),Object(C.jsx)("td",{children:e.amount||0}),Object(C.jsx)("td",{children:e.square||0}),Object(C.jsx)("td",{children:e.square_extra||0}),Object(C.jsx)("td",{children:e.edge||0}),Object(C.jsx)("td",{children:e.edge_extra||0}),Object(C.jsx)("td",{children:e.drilling_count||0})]})}))}))})]})]}),Object(C.jsx)(k,{show:i,onClose:function(){return s(!1)},children:Object(C.jsx)(Q,{onFinish:function(){n.invalidateQueries("project-detail-".concat(e)),s(!1)},project:h})})]})}var W=new(n(101).a)({defaultOptions:{queries:{refetchOnMount:!0,refetchOnWindowFocus:!0}}});var Y=function(){return Object(C.jsx)(l.a,{client:W,children:Object(C.jsx)(s.a,{children:Object(C.jsxs)(o.c,{children:[Object(C.jsx)(o.a,{path:"/project/:id",children:Object(C.jsx)(U,{})}),Object(C.jsx)(o.a,{path:"/",children:Object(C.jsx)(P,{})})]})})})},z=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,103)).then((function(t){var n=t.getCLS,c=t.getFID,r=t.getFCP,a=t.getLCP,i=t.getTTFB;n(e),c(e),r(e),a(e),i(e)}))};n(93);i.a.render(Object(C.jsx)(r.a.StrictMode,{children:Object(C.jsx)(Y,{})}),document.getElementById("root")),z()}},[[94,1,2]]]);
//# sourceMappingURL=main.7996839d.chunk.js.map